{"version":3,"sources":["constants.ts","room/RoomApi.service.ts","room/NoData.tsx","room/Details.tsx","room/Search.tsx","room/List.tsx","App.tsx","index.tsx"],"names":["API_URL","NoData","react_default","a","createElement","className","CFG","chartId","chartPieId","openedColor","closedColor","RoomDetails","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","chart","pieChart","dateAxis","rangesColors","PRESENT","color","NOT_PRESENT","create","Promise","all","fetchXyChartData","fetchPieChartData","fetchDoorStateChartData","then","_ref","_ref2","slicedToArray","xyResponse","pieResponse","doorStateResponse","createXyChart","createPieChart","renderRanges","catch","console","error","finally","setState","isLoading","update","_ref3","_ref4","setXyChartData","setPieChartData","preparePieChartDate","datepickerChanged","field","value","datepicker","objectSpread","state","defineProperty","useTheme","am4themes_animated","dateFrom","Date","location","match","params","id","formatDate","setDate","getDate","timeFrom","toLocaleTimeString","dateTo","timeTo","charts","pie","xy","dispose","_this2","data","_ref5","axisRanges","clear","forEach","el","createRange","startDateTime","endDateTime","xyChartData","pieChartData","openTime","_ref6","closedTime","_this$splitTime","splitTime","_this$splitTime2","openedHours","openedMinutes","_this$splitTime3","_this$splitTime4","closedHours","closedMinutes","calcAmount","parseInt","amount","lighten","opts","url","concat","fetch","res","json","err","fetchRoomTemperature","_ref7","map","temperature","timestamp","fetchRoomStatistic","fetchDoorStateData","axis","from","to","range","endValue","axisFill","fill","fillOpacity","chartData","XYChart","cursor","XYCursor","xAxes","push","DateAxis","title","text","tooltipDateFormat","dateFormats","setKey","periodChangeDateFormats","startLocation","endLocation","yAxes","ValueAxis","series","LineSeries","dataFields","valueY","dateX","name","stroke","strokeWidth","tooltipText","scrollbarX","XYChartScrollbar","_ref8","PieChart","pieSeries","PieSeries","slices","template","propertyFields","category","s","splitedOpen","split","_splitedOpen","date","chunk","arguments","length","undefined","toISOString","_this3","_this$state","react_router_dom","type","role","aria-label","max","min","onChange","_ref9","target","_ref10","_ref11","_ref12","onClick","style","width","height","backgroundColor","NoData_NoData","display","React","Component","RoomSearch","searchTerm","react","placeholder","RoomList","filterRooms","initialRooms","termLowerCased","toLowerCase","rooms","filter","r","indexOf","sessionStorage","getItem","setRooms","JSON","parse","cacheRooms","toConsumableArray","setItem","stringify","Search","room","key","App","react_router","exact","path","component","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.662131b8.chunk.js","sourcesContent":["// export const API_URL = 'http://localhost:1337';\nexport const API_URL = 'http://13.48.69.71:8081';\n","import { API_URL } from '../constants';\nimport { IXyChartDoorStateData, IXyChartDataItem } from './Details.interface';\n\nexport interface IDoorStateDataResponse {\n  data: IXyChartDoorStateData[];\n  location: string;\n}\n\nexport interface ITemperatureResponse {\n  data: IXyChartDataItem[];\n  location: string;\n}\n\nexport interface IDoorStateStatisticResponse {\n  openTime: string;\n  closedTime: string;\n}\n\ninterface IFetchRoomStatisticOptions {\n  id: string;\n  dateFrom: string;\n  timeFrom: string;\n  dateTo: string;\n  timeTo: string;\n}\n\ntype IFetchRoomTemperatureOptions = IFetchRoomStatisticOptions;\ntype IFetchDoorStateDataOptions = IFetchRoomStatisticOptions;\n\nexport function fetchRooms(): Promise<string[]> {\n  return fetch(`${API_URL}/rooms`)\n    .then(res => res.json())\n    .catch(console.error);\n}\n\nexport const fetchRoomTemperature = (opts: IFetchRoomTemperatureOptions): Promise<ITemperatureResponse> => {\n  const { id, dateFrom, timeFrom, dateTo, timeTo } = opts;\n\n  const url = `${API_URL}/rooms/${id}/temperatureData?startDateTime=${dateFrom}T${timeFrom}.000&endDateTime=${dateTo}T${timeTo}.000`;\n\n  return fetch(url)\n    .then(res => res.json())\n    .catch(err => console.error('fetchRoomTemperature', err));\n}\n\nexport const fetchRoomStatistic = (opts: IFetchRoomStatisticOptions): Promise<IDoorStateStatisticResponse> => {\n  const { id, dateFrom, timeFrom, dateTo, timeTo } = opts;\n\n  const url = `${API_URL}/rooms/${id}/doorStateStatistic?startDateTime=${dateFrom}T${timeFrom}.000&endDateTime=${dateTo}T${timeTo}.000`;\n\n  return fetch(url)\n    .then(res => res.json())\n    .catch(err => console.error('fetchRoomStatistic', err));\n}\n\nexport const fetchDoorStateData = (opts: IFetchDoorStateDataOptions): Promise<IDoorStateDataResponse> => {\n  const { id, dateFrom, timeFrom, dateTo, timeTo } = opts;\n\n  const url = `${API_URL}/rooms/${id}/doorStateData?startDateTime=${dateFrom}T${timeFrom}.000&endDateTime=${dateTo}T${timeTo}.000`;\n\n  return fetch(url)\n    .then(res => res.json())\n    .catch(err => console.error('fetchDoorStateData', err));\n}\n","import React from 'react';\n\nexport const NoData = (): JSX.Element => <h3 className=\"text-center mt-5 mb-5 text-secondary\">No Data</h3>;\n","import React from 'react';\nimport { Link } from \"react-router-dom\";\nimport { useTheme, create, color, Color } from \"@amcharts/amcharts4/core\";\nimport am4themes_animated from \"@amcharts/amcharts4/themes/animated\";\n\nimport {\n  XYChart, ValueAxis, XYCursor, XYChartScrollbar, PieChart, PieSeries, DateAxis, LineSeries, AxisRenderer\n} from \"@amcharts/amcharts4/charts\";\n\nimport {\n  RoomDetailsProps, RoomDetailsState, IXyChart, IXyChartDataItem, IPieChartItem, IXyChartDoorStateData\n} from './Details.interface';\n\nimport {\n  fetchRoomTemperature, fetchRoomStatistic, IDoorStateStatisticResponse, fetchDoorStateData, IDoorStateDataResponse\n} from './RoomApi.service';\n\nimport { NoData } from './NoData';\n\nconst CFG = {\n  chartId: 'js-chart',\n  chartPieId: 'js-chart-pie',\n  openedColor: 'blue',\n  closedColor: 'red'\n}\n\nclass RoomDetails extends React.Component<RoomDetailsProps, RoomDetailsState> {\n  chart: IXyChart | undefined; // undefined because we can't render the element in constructor phase\n  pieChart: PieChart | undefined;\n  dateAxis: DateAxis<AxisRenderer> | undefined;\n\n  rangesColors: { [key in IXyChartDoorStateData['state']]: Color } = {\n    PRESENT: color(CFG.closedColor),\n    NOT_PRESENT: color(CFG.openedColor)\n  };\n\n  constructor(props: RoomDetailsProps) {\n    super(props);\n    useTheme(am4themes_animated);\n    const dateFrom = new Date();\n\n    this.state = {\n      isLoading: true,\n      location: props.match.params.id,\n      datepicker: {\n        dateFrom: this.formatDate(new Date(dateFrom.setDate(dateFrom.getDate() - 1))),\n        timeFrom: new Date().toLocaleTimeString(),\n        dateTo: this.formatDate(new Date()),\n        timeTo: new Date().toLocaleTimeString()\n      },\n      charts: {\n        pie: [],\n        xy: []\n      }\n    };\n  }\n\n  componentDidMount() {\n    this.create();\n  }\n\n  componentWillUnmount() {\n    if (this.chart) this.chart.dispose();\n    if (this.pieChart) this.pieChart.dispose();\n  }\n\n  create = () => {\n    Promise.all([this.fetchXyChartData(), this.fetchPieChartData(), this.fetchDoorStateChartData()])\n      .then(([xyResponse, pieResponse, doorStateResponse]) => {\n        this.createXyChart(xyResponse);\n        this.createPieChart(pieResponse);\n        this.renderRanges(doorStateResponse);\n      })\n      .catch(console.error)\n      .finally(() => this.setState({ isLoading: false }));\n  }\n\n  update = () => {\n    Promise.all([this.fetchXyChartData(), this.fetchPieChartData(), this.fetchDoorStateChartData()])\n      .then(([xyResponse, pieResponse, doorStateResponse]) => {\n        this.setXyChartData(xyResponse);\n        this.setPieChartData(this.preparePieChartDate(pieResponse));\n        this.renderRanges(doorStateResponse);\n      })\n      .catch(console.error);\n  }\n\n  renderRanges({data}: IDoorStateDataResponse) {\n    const { dateAxis } = this;\n    if (!dateAxis) return;\n\n    dateAxis.axisRanges.clear();\n\n    data.forEach((el: IXyChartDoorStateData) => {\n      this.createRange(dateAxis, new Date(el.startDateTime), new Date(el.endDateTime), this.rangesColors[el.state]);\n    });\n  }\n\n  setXyChartData(xyChartData: IXyChartDataItem[]) {\n    this.setState({\n      charts: { ...this.state.charts, xy: xyChartData }\n    });\n\n    if (this.chart) this.chart.data = xyChartData;\n  }\n\n  setPieChartData(pieChartData: IPieChartItem[]) {\n    this.setState({\n      charts: { ...this.state.charts, pie: pieChartData }\n    });\n\n    if (this.pieChart) this.pieChart.data = pieChartData;\n  }\n\n  preparePieChartDate({openTime, closedTime}: IDoorStateStatisticResponse): IPieChartItem[] {\n    const [openedHours, openedMinutes] = this.splitTime(openTime);\n    const [closedHours, closedMinutes] = this.splitTime(closedTime);\n\n    const noData = parseInt(openTime) === 0 && parseInt(closedTime) === 0; // BE response \"00:00:00\"\n\n    const calcAmount = (openedHours: string, openedMinutes: string): number => {\n      return (parseInt(openedHours) * 60) + parseInt(openedMinutes);\n    }\n\n    return noData\n      ? []\n      : [\n        {state: 'Opened', amount: calcAmount(openedHours, openedMinutes), color: color(CFG.openedColor).lighten(0.65)},\n        {state: 'Closed', amount: calcAmount(closedHours, closedMinutes), color: color(CFG.closedColor).lighten(0.65)}\n      ];\n  }\n\n  fetchXyChartData(): Promise<IXyChartDataItem[]> {\n    return fetchRoomTemperature({ id: this.state.location, ...this.state.datepicker })\n      .then(({ data }) => data.map((el: IXyChartDataItem) => ({\n        temperature: el.temperature,\n        timestamp: new Date(el.timestamp)\n      })))\n      .catch(err => {\n        console.error(err);\n        return [];\n      });\n  }\n\n  fetchPieChartData(): Promise<IDoorStateStatisticResponse> {\n    return fetchRoomStatistic({ id: this.state.location, ...this.state.datepicker });\n  }\n\n  fetchDoorStateChartData(): Promise<IDoorStateDataResponse> {\n    return fetchDoorStateData({ id: this.state.location, ...this.state.datepicker });\n  }\n\n  createRange(axis: DateAxis<AxisRenderer>, from: Date, to: Date, color: Color) {\n    const range = axis.axisRanges.create();\n    (range as any).value = from;\n    (range as any).endValue = to;\n    range.axisFill.fill = color;\n    range.axisFill.fillOpacity = 0.3;\n  }\n\n  createXyChart(chartData: IXyChartDataItem[]) {\n    this.chart = create(CFG.chartId, XYChart);\n    this.chart.cursor = new XYCursor();\n    this.setXyChartData(chartData);\n\n    this.dateAxis = this.chart.xAxes.push(new DateAxis());\n    this.dateAxis.title.text = \"üïë Time\";\n    this.dateAxis.tooltipDateFormat = \"dd.MM\";\n    this.dateAxis.dateFormats.setKey(\"hour\", \"MMMM dt\");\n    this.dateAxis.periodChangeDateFormats.setKey(\"hour\", \"MMMM dt\");\n    this.dateAxis.startLocation = 1;\n    this.dateAxis.endLocation = 0;\n\n    const valueAxis = this.chart.yAxes.push(new ValueAxis());\n    valueAxis.title.text = \"üå° (¬∞C)\";\n\n    const series = this.chart.series.push(new LineSeries());\n    series.dataFields.valueY = \"temperature\";\n    series.dataFields.dateX = \"timestamp\";\n    series.name = \"Temperature\";\n    series.stroke = color('yellow').lighten(0.1);\n    series.fill = color('#efefef');\n    series.strokeWidth = 1;\n    // series.strokeOpacity = 0.8;\n    // series.fillOpacity = 0.5;\n    // series.tensionY = 0.97;\n    // series.tensionX = 0.97;\n    series.tooltipText = \"At {dateX.formatDate('HH:mm')} the temperature was {valueY}¬∞\";\n\n    const scrollbarX = new XYChartScrollbar(); // Add horizotal scrollbar with preview\n    scrollbarX.series.push(series);\n    this.chart.scrollbarX = scrollbarX;\n  }\n\n  createPieChart({ openTime, closedTime }: IDoorStateStatisticResponse) {\n    this.pieChart = create(CFG.chartPieId, PieChart);\n\n    const pieSeries = this.pieChart.series.push(new PieSeries());\n    pieSeries.slices.template.propertyFields.fill = \"color\";\n    pieSeries.slices.template.propertyFields.stroke = \"color\";\n    pieSeries.dataFields.value = \"amount\";\n    pieSeries.dataFields.category = \"state\";\n    pieSeries.slices.template.tooltipText = \"{category}: {value.value} minutes\";\n\n    this.setPieChartData(this.preparePieChartDate({ openTime, closedTime }));\n  }\n\n  splitTime(s: string): [string, string] {\n    const splitedOpen = s.split(':');\n    const [openHours, openMinutes] = splitedOpen; // ignoring ms\n    return [openHours, openMinutes];\n  }\n\n  datepickerChanged = (field: keyof RoomDetailsState['datepicker'], value: string) => {\n    this.setState({\n      datepicker: {\n        ...this.state.datepicker,\n        [field]: value\n      }\n    });\n  }\n\n  formatDate(date: Date, chunk = 0): string {\n    return date.toISOString().split('T')[chunk];\n  }\n\n  render(): JSX.Element {\n    const { location, isLoading } = this.state;\n\n    return (\n      <div className=\"container\">\n        <div className=\"row mb-5\">\n          <div className=\"col-12\">\n            <div className=\"row mb-3 mt-3\">\n              <div className=\"col-3\">\n                <Link to=\"/\" className=\"text-decoration-none\">\n                  <button type=\"button\" className=\"btn btn-light alert btn-block\">\n                    <span role=\"img\" aria-label=\"go back\">‚Üê</span> select room\n                  </button>\n                </Link>\n              </div>\n              <div className=\"col-9\">\n                <div className=\"alert alert-success text-center\">\n                  {location}\n                </div>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"col\">\n                <div className=\"form-group\">\n                  <label>Date From</label>\n                  <input type=\"date\" max=\"3000-12-31\" min=\"1000-01-01\" className=\"form-control\"\n                    onChange={({ target: { value } }) => this.datepickerChanged('dateFrom', value)}\n                    value={this.state.datepicker.dateFrom} />\n                </div>\n              </div>\n\n              <div className=\"col\">\n                <div className=\"form-group\">\n                  <label>Time From</label>\n                  <input type=\"time\" min=\"1000-01-01\" max=\"3000-12-31\" className=\"form-control\"\n                    onChange={({ target: { value } }) => this.datepickerChanged('timeFrom', value)}\n                    value={this.state.datepicker.timeFrom} />\n                </div>\n              </div>\n\n              <div className=\"col\">\n                <div className=\"form-group\">\n                  <label>Date To</label>\n                  <input type=\"date\" max=\"3000-12-31\" min=\"1000-01-01\" className=\"form-control\"\n                    onChange={({ target: { value } }) => this.datepickerChanged('dateTo', value)}\n                    value={this.state.datepicker.dateTo} />\n                </div>\n              </div>\n\n              <div className=\"col\">\n                <div className=\"form-group\">\n                  <label>Time To</label>\n                  <input type=\"time\" min=\"1000-01-01\" max=\"3000-12-31\" className=\"form-control\"\n                    onChange={({ target: { value } }) => this.datepickerChanged('timeTo', value)}\n                    value={this.state.datepicker.timeTo} />\n                </div>\n              </div>\n\n              <div className=\"col\">\n                <label>&nbsp;</label>\n                <button onClick={this.update} type=\"button\" className=\"form-control btn btn-outline-primary\">\n                  <span role=\"img\" aria-label=\"go back\">üîÑ</span>\n                </button>\n              </div>\n            </div>\n\n            {/* TODO: info message about timings */}\n\n            <div className=\"alert alert-warning d-flex justify-content-around align-items-center\">\n              <div className=\"d-flex align-items-center\">\n                <div className=\"rounded-circle mr-2\" style={{ width: '1rem', height: '1rem', backgroundColor: CFG.openedColor }}></div>\n                <div>Door Opened</div>\n              </div>\n              <div>Temperature</div>\n              <div className=\"d-flex align-items-center\">\n                <div className=\"rounded-circle mr-2\" style={{ width: '1rem', height: '1rem', backgroundColor: CFG.closedColor }}></div>\n                <div>Door Closed</div>\n              </div>\n            </div>\n\n            <div id={CFG.chartId} style={{\n              width: \"100%\",\n              height: \"25rem\",\n              // display: this.state.charts.xy.length === 0 ? 'none' : 'block'\n            }}>\n            </div>\n\n            {(this.state.charts.xy.length === 0 && !isLoading) && <NoData />}\n\n            <div className=\"alert alert-secondary text-center\">Proximity</div>\n            <div id={CFG.chartPieId} className=\"mt-5\" style={{\n              width: \"100%\",\n              height: \"10rem\",\n              display: this.state.charts.pie.length === 0 ? 'none' : 'block'\n            }}>\n            </div>\n\n            {(this.state.charts.pie.length === 0 && !isLoading) && <NoData />}\n\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n}\n\nexport default RoomDetails;\n","import * as React from 'react';\n\nexport interface RoomSearchProps {\n  onChange: (searchTerm: string) => void;\n}\n\nexport interface RoomSearchState {\n  searchTerm: string;\n}\n\nclass RoomSearch extends React.Component<RoomSearchProps, RoomSearchState> {\n  constructor(props: RoomSearchProps) {\n    super(props);\n\n    this.state = {\n      searchTerm: ''\n    };\n  }\n\n  render(): JSX.Element {\n    return (\n      <div className=\"form-group\">\n        <input\n          type=\"text\"\n          className=\"form-control\"\n          placeholder=\"Search for a room..\"\n          onChange={ ({target: {value: searchTerm}}) => this.props.onChange(searchTerm) }/>\n      </div>\n    );\n  }\n}\n\nexport default RoomSearch;\n","import * as React from 'react';\n\nimport { Link } from \"react-router-dom\";\nimport { fetchRooms } from './RoomApi.service';\nimport RoomSearch from './Search';\n\ninterface RoomListProps {}\n\ninterface RoomListState {\n  initialRooms: string[];\n  rooms: string[];\n}\n\nclass RoomList extends React.Component<RoomListProps, RoomListState> {\n  constructor(props: RoomListProps) {\n    super(props);\n\n    this.state = {\n      initialRooms: [],\n      rooms: []\n    };\n  }\n\n  componentWillMount() {\n    const rooms = sessionStorage.getItem('rooms');\n\n    if (rooms) {\n      this.setRooms(JSON.parse(rooms));\n    } else {\n      fetchRooms().then(initialRooms => {\n        this.setRooms(initialRooms);\n        this.cacheRooms(initialRooms);\n      });\n    }\n  }\n\n  setRooms(initialRooms: string[]) {\n    this.setState({\n      initialRooms,\n      rooms: [...initialRooms]\n    });\n  }\n\n  cacheRooms(initialRooms: string[]) {\n    sessionStorage.setItem('rooms', JSON.stringify(initialRooms));\n  }\n\n  filterRooms = (searchTerm: string) => {\n    const { initialRooms } = this.state;\n    const termLowerCased = searchTerm.toLowerCase();\n\n    const rooms = searchTerm\n      ? initialRooms.filter(r => r.toLowerCase().indexOf(termLowerCased) > -1)\n      : initialRooms;\n\n    this.setState({rooms});\n  }\n\n  render(): JSX.Element {\n    return (\n      <div className=\"container mt-4\">\n        <div className=\"row\">\n          <div className=\"col-6 offset-3\">\n            <RoomSearch onChange={this.filterRooms} />\n          </div>\n        </div>\n\n        <div className=\"row\">\n          <div className=\"col-6 offset-3\">\n            <div className=\"list-group mb-5\">\n            {this.state.rooms.map((room: string) =>\n              <Link\n                to={`/room/${room}`}\n                key={room}\n                className=\"list-group-item list-group-item-action\">\n                {room}\n              </Link>\n            )}\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default RoomList;\n","import React from 'react';\n\nimport './App.css';\n\nimport RoomDetails from './room/Details';\nimport RoomList from './room/List';\n\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\n\nfunction App() {\n  return (\n    <Router>\n      <Route exact path=\"/\" component={RoomList} />\n      <Route path=\"/room/:id\" component={RoomDetails} />\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport 'bootstrap/dist/css/bootstrap.css';\n\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}